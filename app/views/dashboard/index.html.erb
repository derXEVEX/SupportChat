<div class="dashboard-container">
  <div class="dashboard-header">
    <div>
      <h1 class="dashboard-title">Dashboard</h1>
      <p class="user-greeting">Willkommen, <%= current_user.name %>!</p>
    </div>
    <div class="header-actions">
      <% if current_user.admin? %>
        <%= link_to "Benutzerverwaltung", admin_users_path, class: "admin-button" %>
      <% end %>
      <%= button_to "Abmelden", logout_path, method: :delete, class: "logout-button" %>
    </div>
  </div>

  <% if flash[:alert] %>
    <div class="dashboard-alert alert-error">
      <%= flash[:alert] %>
    </div>
  <% end %>

  <% if flash[:notice] %>
    <div class="dashboard-alert alert-success">
      <%= flash[:notice] %>
    </div>
  <% end %>

  <h2 class="section-title">Profilinformationen</h2>
  <div class="profile-info">
    <div class="info-item">
      <span class="info-label">Name:</span>
      <span class="info-value"><%= current_user.name %></span>
    </div>
    <div class="info-item">
      <span class="info-label">E-Mail:</span>
      <span class="info-value"><%= current_user.email %></span>
    </div>
    <div class="info-item">
      <span class="info-label">Rolle:</span>
      <span class="info-value"><%= current_user.role.capitalize %></span>
    </div>
  </div>

  <div class="form-section">
    <h2>Name ändern</h2>
    <%= form_with url: change_name_dashboard_index_path, method: :post, local: true, class: "dashboard-form" do |form| %>
      <div class="form-row">
        <%= form.label :name, "Neuer Name" %>
        <%= form.text_field :name, value: current_user.name %>
        <%= form.submit "Aktualisieren" %>
      </div>
    <% end %>
  </div>

  <div class="form-section">
    <h2>E-Mail ändern</h2>
    <%= form_with url: change_email_dashboard_index_path, method: :post, local: true, class: "dashboard-form" do |form| %>
      <div class="form-row">
        <%= form.label :email, "Neue E-Mail" %>
        <%= form.email_field :email, placeholder: "deine@email.de" %>
        <%= form.submit "Aktualisieren" %>
      </div>
    <% end %>
  </div>

  <div class="form-section">
    <h2>Passwort ändern</h2>
    <%= form_with url: change_password_dashboard_index_path, method: :post, local: true, class: "dashboard-form" do |form| %>
      <div class="form-row">
        <%= form.label :current_password, "Aktuelles Passwort" %>
        <%= form.password_field :current_password, placeholder: "Dein aktuelles Passwort" %>
      </div>
      <div class="form-row">
        <%= form.label :new_password, "Neues Passwort" %>
        <%= form.password_field :new_password, placeholder: "Min. 12 Zeichen" %>
      </div>
      <div class="form-row">
        <%= form.label :new_password_confirmation, "Neues Passwort bestätigen" %>
        <%= form.password_field :new_password_confirmation, placeholder: "Passwort wiederholen" %>
      </div>
      <%= form.submit "Passwort ändern" %>
    <% end %>
  </div>
  <div class="dashboard-section">
    <h2 class="section-title">Support</h2>
    <div class="dashboard-links">
      <div class="dashboard-link-card">
        <h3>Support</h3>
        <p>Hilfe und Unterstützung erhalten</p>
        <%= link_to "Meine Support-Anfragen", my_requests_support_requests_path, class: "dashboard-link" %>
        <%= link_to "Neue Support-Anfrage", new_support_request_path, class: "dashboard-link" %>

        <% if current_user.admin? || current_user.supporter? %>
          <%= link_to "Support-Anfragen verwalten", support_requests_path, class: "dashboard-link admin-link" %>
        <% end %>
      </div>
    </div>
  </div>
</div>
